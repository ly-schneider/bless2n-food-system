---
title: Anhang
description: Environment Variablen, Key Vault Secrets Map, Azure Ressourcen, Terraform Variablen und Glossar
---

# Environment Variable Katalog

Backend (Go):

- Core: `APP_ENV`, `APP_PORT`, `PUBLIC_BASE_URL` (Fallback), `JWT_ISSUER` (Fallback), `JWT_PRIV_PEM`, `JWT_PUB_PEM`.
- Mongo: `MONGO_URI`, `MONGO_DATABASE`.
- SMTP: `SMTP_HOST`, `SMTP_PORT`, `SMTP_USERNAME`, `SMTP_PASSWORD`, `SMTP_FROM`, `SMTP_TLS_POLICY`.
- Security: `SECURITY_ENABLE_HSTS`, `SECURITY_ENABLE_CSP`, `SECURITY_TRUSTED_ORIGINS` (comma‑separated, auto-derived).
- OAuth: `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET`.
- Stripe: `STRIPE_SECRET_KEY`, `STRIPE_WEBHOOK_SECRET`.
- Stations: `STATION_QR_SECRET`, `STATION_QR_MAX_AGE_SECONDS`.
- Logger: `LOG_LEVEL`, `LOG_DEVELOPMENT`.

Web App (Next.js):

- URLs/API: `BACKEND_INTERNAL_URL` (internal fetch target, auto-derived); Browser nutzt stets `/api`.
- Stripe: `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY`.
- Google: `NEXT_PUBLIC_GOOGLE_CLIENT_ID`.
- POS: `NEXT_PUBLIC_POS_PIN`, `NEXT_PUBLIC_POS_IDLE_TIMEOUT`.
- Analytics: `NEXT_PUBLIC_GA_MEASUREMENT_ID`.

Android:

- Build‑Time: `SUMUP_AFFILIATE_KEY`, `POS_URL` (Varianten), `BFS_UPLOAD_*` (Keystore/Signing für Release).

---

# Key Vault Secrets Map

Typische Namen und Consumer:

- Backend:
  - `mongo-uri` → `MONGO_URI`
  - `jwt-priv-pem` → `JWT_PRIV_PEM`
  - `jwt-pub-pem` → `JWT_PUB_PEM`
  - `station-qr-secret` → `STATION_QR_SECRET`
  - `google-client-secret` → `GOOGLE_CLIENT_SECRET`
  - `stripe-secret-key` → `STRIPE_SECRET_KEY`
  - `stripe-webhook-secret` → `STRIPE_WEBHOOK_SECRET`
  - `smtp-password` → `SMTP_PASSWORD`
- Frontend:
  - (runtime secrets only via `var.app_secrets`; domain URLs werden automatisch aus Terraform-Domains gesetzt)

---

# Azure Resource Inventory (pro Umgebung)

- Resource Group: `bfs-<env>-rg`
- VNet/Subnets: `bfs-<env>-vnet`, `container-apps-subnet` (+ `private-endpoints-subnet` optional)
- Container Apps Environment: `bfs-<env>-env`
- Container Apps: `frontend-<env>`, `backend-<env>`
- Cosmos DB (Mongo API): `bfs-<env>-cosmos`
- Key Vault: `bfs-<env>-kv`
- Log Analytics: `bfs-logs-workspace`
- ACR: `<acr_name>`

---

# Terraform Variablen (Env Roots)

- Image Digests: `frontend_digest`, `backend_digest` (bevorzugt statt Tags)
- Image Tag: `image_tag` (Branch‑Name)
- `revision_suffix`: eindeutiger Wert je Deploy (z. B. Commit SHA)
- `acr_name`, `enable_acr`
- Scale Rules: Pro App HTTP Concurrent, CPU/Memory Schwellen, min/max Replicas
- Budgets & Alerts: `budget_amount`, `alert_emails`

---

# Glossar

- ACA: Azure Container Apps
- LAW: Log Analytics Workspace
- RU/s: Request Units per second (Cosmos)
- UAMI: User‑Assigned Managed Identity
- PI: Payment Intent (Stripe)
- KV: Key Vault

---
title: Daten & Datenschutz
description: Datenmodell, PII‑Handling, Security und Retention/Backups
---

# Data Model Deep Dive

Collections (Mongo/Cosmos):

- Users: E‑Mail, Rolle (admin/customer), verified, optional `stripeCustomerId`.
- Products & Categories: `type` (simple/menu), Preis in Cents, Aktiv‑Status, Menu Slots/Items.
- Orders & Order Items: Status (`pending|paid|cancelled|refunded`), Origin (`shop|pos`), Stripe Felder und `posPayment` für POS‑Tender.
- Inventory Ledger: Append‑only Anpassungen mit `reason` und `delta`.
- Devices & Stations: Station Requests, Stationen, POS Requests/Devices.
- Sessions & Links: Refresh Token Families; Identity Links für federated login.

# PII & Security

- PII: E‑Mail‑Adressen; optionale Namen für Admins; keine Kartendaten (PAN) im System — Karten via Stripe oder nicht‑sensitive Metadaten via SumUp.
- Tokens: JWT (Ed25519 signiert); JWKS veröffentlicht; Refresh Tokens rotieren, Widerruf pro Family möglich.
- Secrets: In Key Vault; Apps beziehen via Secret Refs.
- Auth: Passwordless via OTP und Google; CORS und CSP aktiv.

# Retention & Backups

- LAW Retention: Standard 30 Tage; je Policy anpassen.
- Cosmos Backups: Account‑weite Backup Policy; RPO/RTO Anforderungen prüfen; Export‑Guidance beachten.
- Exports: Admin Orders CSV Export vorhanden; keine sensiblen Felder ausgeben.
